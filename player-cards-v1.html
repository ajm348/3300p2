<html>
<head>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<!-- Load the d3 library. -->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<style>
/* put a border around the svg element so we can see the coordinate system better. */
body { font-family: "Open Sans"; } div { margin: 30px; }
svg { background-color: white;}
div {margin: 0;}

.card {
	margin: 8px;
	width: 405px;
	padding: 4px;
	}
.stats {
	font-size: small;
	text-align: center;
}
.stats td {
	padding: 8px;
}
img {position: absolute;
z-index: -1;
}

.lbs {
	font-size: small;
}
.yearPlaying {
	margin-top: 2.1em;
	margin-bottom: 0px;
}
.card h1 {
	margin-left: 80px;
	display: inline-block;
	font-size: 22px}
.card ul {
	font-size: 14px;
	list-style: none;
	margin-top: -18px;
	margin-left: 85px;
}
.playerPhoto{display: inline-block;}



</style>
<title>Project 2</title>
</head>
<body>

<h3>Project 2 -- NBA Championship Analysis</h3>

<div>Data from <a href="http://basketball-reference.com">basketball-reference.com</a>.</div>

<!-- The SVG element will go in here-->
<div id="playerCards-wrapper"></div>
<script>

var nbaColors = [{"team":"Atlanta Hawks",  "first": "#01244C", "third": "#D21033"},
{"team": "Boston Celtics", "first": "#05854C", "second": "#EAEFE9",  "third": "#FFFFFF"},
{"team": "Charlotte Bobcats", "first": "#F26532" , "second":  "#29588B" },
{"team": "Chicago Bulls", "first": "#D4001F", "second": "#000000", "third":"#FFFFFF"},
{"team":"Cleveland Cavaliers","first":"#9F1425","second":"#003375", "third":"#B99D6A"},
{"team": "Dallas Mavericks", "first": "#006AB5", "second": "#F0F4F7"}, 
{"team":"Denver Nuggets", "first":  "#4393D1", "second": "#FBB529"},
{"team":"Detroit Pistons",  "first":"#ED174C", "second":"#006BB6"},
{"team":"Golden State Warriors", "first": "#FDB927", "second": "#006bb6", "third": "#FFC33C"},
{"team":"Houston Rockets","first":"#CC0000", "second":"#FFFFFF"},
{"team":"Indiana Pacers", "first": "#002E62",  "second":"#FFC225"},
{"team":"Los Angeles Clippers", "first":"#EE2944", "second": "#146AA2", "third": "#FFFFFF" },
{"team":"Los Angeles Lakers","first":"#4A2583", "second":"#F5AF1B"},
{"team":"Memphis Grizzlies", "first": "#001B41", "second":"#85A2C6", "third":"#FFFFFF"},
{"team":"Miami Heat", "first":  "#B62630", "second":"#1E3344","third": "#FF9F00"},
{"team":"Milwaukee Bucks", "first": "#00330A", "second": "#C82A39"},
{"team":"Minnesota Timberwolves", "first": "#015287", "second": "#000000", "third": "#EFEFEF"},
{"team":"New Jersey Nets", "frist":"#002258", "second":"#D32E4C", "third":"#EFEFF1"},
{"team":"New Orleans Hornets", "first":  "#0095CA", "second": "#1D1060", "third": "#FEBB25"},
{"team":"New York Knicks", "first":"#2E66B2", "second":"#FF5C2B" },
{"team":"Oklahoma City Thunder", "first": "#0075C1", "second":"#E7442A","third":"#002553"},
{"team":"Orlando Magic", "first": "#077ABD","second":"#C5CED5","third":"#000000"},
{"team":"Philadelphia 76ers", "first": "#C5003D", "second": "#000000", "third": "#C7974D" },
{"team":"Phoenix Suns", "first": "#48286C", "second":"#FF7A31","third": "#FFBC1E" },
{"team":"Portland Trail Blazers", "first": "#000000", "second": "#E1393E", "third": "#B4BDC3" },
{"team":"San Antonio Spurs", "first": "#000000", "second": "#BEC8C9", "thrid": "#FFFFFF" },
{"team":"Sacramento Kings", "first": "#743389", "second":"#DCE2E4", "thrid": "#000000"},
{"team":"Toronto Raptors", "first":"#CD1041", "second":"#ECEBE9", "third":"#000000"},
{"team":"Utah Jazz", "first":"#001D4D","second":"#448CCE",  "third":"#480975"},
{"team":"Washington Wizards", "first":"#004874","third":"#BC9B6A" }
]

$( document ).ready(function() {
	$("#playerCards-wrapper").append("<select id='years' onchange='createTeamCards()'></select><div id='playerCards'></div>");
	for (var value=2015; value>1979;value--){
		$("#years").append("<option value='"+value+"'>"+(value-1)+"-"+value+"</option>");
	}
	createTeamCards();
});

var Year;
//get the 5 players from the csv file and then create cards for them
function createTeamCards(){
	var inputYear = $("#years").val();
	Year = inputYear-1 +"-"+inputYear;
	d3.csv("championship_players_data.csv", function (error, rows) {	
		if (error) {console.log(error);}
		playersStats = d3.map(rows, function (player) { return player.Player; });
		//console.log(rows);
		$("#playerCards").empty();
		for (var i=0; i<rows.length; i++){
			if (rows[i].Year == inputYear) {
				console.log(rows[i])
				createCard(rows[i]);
			}
		}
	});
}

//creating cards for the players.
function createCard(player){
	//console.log(player);
	$("#playerCards").append("<div class='card' id="+player.id+"> </div>");
	console.log("#"+player.id);
	$("#"+player.id).append("<div class='card-wrapper'> <div class='player-shadows'> <div class='shadow-right'></div> <div class='shadow-left'></div> </div> <div class='card-content'> <div class='team-logo'></div> <div class='player-photo'> <img src='assets/img/"+player.picture_url+"' alt='"+player.Player+" Photo'></div> <span class='playerNumber'>#"+player.Number+" </span><h1>"+player.Player+" <span class='position'>"+player.Position+"</span></h1> <div class='player-bio'> <ul class='general-info'> <li class='first'>"+player.Height+", "+player.Weight+"<span class='lbs'>lbs</span></li> <li class='last'>"+player.Team+"</li></ul></div> <div class='player-stats'> <p class='yearPlaying'>"+Year+" Season</p> <table class='stats'> <thead><tr><th>MPG</th><th>PPG</th><th>APG</th><th>RPG</th><th>Steals</th><th>3pt%</th><th>3ptA</th><th>Per</th></tr></thead> <tbody> <tr><td>"+player.MP+"</td><td>"+player.PTS+"</td><td>"+player.ast+"</td><td>"+player.TRB+"</td><td>"+player.stl+"</td><td>"+player['p3%']+"</td><td>"+player['p3A']+"</td><td>"+player.per+"</td></tr></tbody> </table> </div> </div> <div class='header-bg'></div> </div>");
	var teamColors;
	console.log(player.Team);
	for (var k=0; k<nbaColors.length; k++){
		//console.log(nbaColors[k].team);
		if (nbaColors[k].team == player.Team) {
			teamColors = nbaColors[k];
			$("#"+player.id).css("color", teamColors.second);
			$(".position").css("color", teamColors.first);
		}
	}
	
}
</script>
<!--
<div class='card-wrapper'>
	<div class='player-shadows'>
		<div class='shadow-right'></div>
		<div class='shadow-left'></div>
	</div>
	<div class='card-content'>
		<div class='team-logo'></div>
		<div class='player-photo'>
			<img style='width: 100px;'src='http://a.espncdn.com/combiner/i?img=/i/headshots/nba/players/full/3975.png&amp;w=350&amp;h=254' alt='player.Player'></div>
		<h1>"+player.Player+"</h1>
		<div class='player-bio'>
			<ul class='general-info'>
				<li class='first'>"+player.Number+"</li>
				<li>"+player.Height+", "+player.Weight+"</li>
				<li class='last'>"+player.Team+"</li></ul>
			<!--<ul class='player-metadata'>
				<li><span>Born</span>Mar 14, 1988 in Akron, OH (Age: 28)</li>
				<li><span>Drafted</span>2009: 1st Rnd, 7th by GS</li>
				<li><span>College</span>Davidson</li>
				<li><span>Experience</span>6 years</li>
			</ul>--
		</div>
		<div class='player-stats'>
			<p>204-2015</p>
			<table class='stats'>
				<thead><tr><th>MPG</th><th>PPG</th><th>APG</th><th>RPG</th><th>Steals</th><th>3pt%</th><th>3pt Attempts</th><th>Per</th></tr></thead>
				<tbody>
					<tr><td>"+player.MP+"</td><td>"+player.PPG+"</td><td>"+player.ast+"</td><td>"+player.reb+"</td><td>"+player.stl+"</td><td>"+player.3pt%+"</td><td>"+player.3ptA+"</td><td>"+player.per+"</td></tr>
					<!--<tr class='title'><td colspan='9'><p>Career</p></td></tr>
					<tr class='career'><td>22.4</td><td>6.9</td><td>4.3</td></tr>--
				</tbody>
			</table>
		</div>
	</div>
	<div class='header-bg'></div>
</div>-->


</body>
</html>